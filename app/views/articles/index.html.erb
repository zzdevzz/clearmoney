<h1 class="text-white mt-5">Educational resources to help you on your financial journey.</h1>

<div class="row justify-content-center" >
  <div class="col-sm-8 my-3 d-flex flex-column">
    <%= form_with url: articles_path, method: :get, class: "d-flex" do %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: " Search a topic of interest"
        %>
      <%= submit_tag "Search", name: "", class: "ms-3 btn btn-primary" %>
    <% end %>
    <button class="btn btn-primary align-self-end mt-2" id="aiicon"type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling"><i class="fa-solid fa-graduation-cap"></i></button>
  </div>
</div>

<div class="offcanvas offcanvas-end border-green-left" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
  <div class="offcanvas-header navbar-lewagon navbar-expand-sm">
    <h5 class="offcanvas-title mx-auto" id="offcanvasScrollingLabel"> Financial Friend <i class="fa-solid fa-robot"></i></h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body color-frame overflow-auto custom-scroll" data-controller="open-ai">
    <div class="mb-4 m-3 d-flex flex-row">
      <input type="text" class="form-control" name="input" placeholder="How can I help?" data-open-ai-target="input">
      <input type="submit" class="btn btn-primary ms-2 " value = "Search" data-action="click->open-ai#openAi" >
    </div>
    <div data-open-ai-target="results" class="">
      <p class="text-white">Our FinAIncial advisor is here to assist 24/7.</p>
    </div>
  </div>
</div>

<div class="">
  <div class="row mb-5 gx-5">
    <% @articles.each_with_index do |article, index| %>
      <% photo_url = image_path "https://source.unsplash.com/random/?#{index},finance" %>
      <div class="col-lg-4 col-md-6 col-12">
        <a href="<%=article.url%>" target="_blank">
          <div class="flip-card mt-5">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <%= image_tag photo_url, style: "height: 65%; width: 100%; object-fit: cover;" %>
                <div style="height: 35%" class="text-content d-flex align-items-center justify-content-center">
                  <h2 class="mb-0 text-white p-3 text-center"><%= article.title.titleize %></h2>
                </div>
              </div>
              <div class="flip-card-back p-4 text-content purple-gradient-bg">
                <h2 class="text-white"><%= article.title.titleize %></h2>
                <p class="text-white"><%= article.description %></p>
              </div>
            </div>
          </div>
        </a>
      </div>
    <% end %>
  </div>
</div>
